<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Home Hub</title>
<link rel="stylesheet" href="css/hud.css">
<style>
  body { font-family: Arial, sans-serif; text-align: center; background: #f0f0f0; padding: 2rem; }
  .fade-in { animation: fadeIn 1s ease forwards; opacity: 0; }
  @keyframes fadeIn { to { opacity: 1; } }

  .hub-container { display: inline-block; background: #fff; padding: 2rem; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
  .hub-container h2 { margin-top: 0; }
  .hub-container button { margin-top: 1rem; padding: 0.5rem 1rem; border-radius: 6px; border: 1px solid #ccc; cursor: pointer; }
</style>
</head>
<body>

<div class="hub-container fade-in">
  <h2>Welcome, <span id="user-name">Guest</span>!</h2>
  <p>This is your central hub. All projects start from here.</p>
  <button id="logout-btn">Log Out</button>
  <br><br>
  <button onclick="window.location.href='./buster.html'">Go to Buster</button>
  <!-- Add more project links here -->
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script>
const SUPABASE_URL = "https://gthmaclvolczkhujsuts.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0aG1hY2x2b2xjemtodWpzdXRzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcyOTI1ODAsImV4cCI6MjA3Mjg2ODU4MH0.Blii34bqL_sxvilJLdvduSvsAMrPYnsWq_a87AwWLi4";
const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

async function checkUser() {
  const { data: { user } } = await supabase.auth.getUser();
  if(!user) {
    window.location.href = './login.html';
  } else {
    // Show email or Discord username if available
    const displayName = user.user_metadata?.full_name || user.email || "User";
    document.getElementById('user-name').textContent = displayName;
  }
}

// Logout button
document.getElementById('logout-btn').addEventListener('click', async () => {
  await supabase.auth.signOut();
  window.location.href = './login.html';
});

// Check session on page load
checkUser();
</script>

</body>
</html>
